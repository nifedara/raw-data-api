
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raw Data API  is a set of high-performant APIs for transforming and exporting OpenStreetMap (OSM) data in different GIS file formats.">
      
      
      
        <link rel="canonical" href="https://hotosm.github.io/export-tool-api/api/API/api_worker/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-8.5.10">
    
    
      
        <title>Api worker - Raw Data API</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/mkdocsoad.cssmkdocs">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-apiapi_worker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Raw Data API" class="md-header__button md-logo" aria-label="Raw Data API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Raw Data API
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Api worker
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent=""  aria-label=""  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hotosm/export-tool-api" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hotosm/export-tool-api
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Raw Data API" class="md-nav__button md-logo" aria-label="Raw Data API" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Raw Data API
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hotosm/export-tool-api" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hotosm/export-tool-api
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Raw Data API
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/backend/" class="md-nav__link">
        Backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/docker/" class="md-nav__link">
        Docker Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installation/configurations/" class="md-nav__link">
        Configurations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../endpoints/" class="md-nav__link">
        Endpoints
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/Example_Python/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        API Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../src/" class="md-nav__link">
        Source Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../workflow/" class="md-nav__link">
        Workflow
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create_readme_content" class="md-nav__link">
    create_readme_content
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_file" class="md-nav__link">
    remove_file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zip_binding" class="md-nav__link">
    zip_binding
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#baseclasstask" class="md-nav__link">
    BaseclassTask
  </a>
  
    <nav class="md-nav" aria-label="BaseclassTask">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ancestors-in-mro" class="md-nav__link">
    Ancestors (in MRO)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#descendants" class="md-nav__link">
    Descendants
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-variables" class="md-nav__link">
    Class variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static-methods" class="md-nav__link">
    Static methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_around" class="md-nav__link">
    add_around
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotate" class="md-nav__link">
    annotate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind" class="md-nav__link">
    bind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_bound" class="md-nav__link">
    on_bound
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-variables" class="md-nav__link">
    Instance variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    Methods
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asyncresult" class="md-nav__link">
    AsyncResult
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_to_chord" class="md-nav__link">
    add_to_chord
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add_trail" class="md-nav__link">
    add_trail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after_return" class="md-nav__link">
    after_return
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply" class="md-nav__link">
    apply
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply_async" class="md-nav__link">
    apply_async
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#before_start" class="md-nav__link">
    before_start
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunks" class="md-nav__link">
    chunks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delay" class="md-nav__link">
    delay
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#map" class="md-nav__link">
    map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_failure" class="md-nav__link">
    on_failure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_replace" class="md-nav__link">
    on_replace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_retry" class="md-nav__link">
    on_retry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on_success" class="md-nav__link">
    on_success
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pop_request" class="md-nav__link">
    pop_request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#push_request" class="md-nav__link">
    push_request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace" class="md-nav__link">
    replace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retry" class="md-nav__link">
    retry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" class="md-nav__link">
    run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s" class="md-nav__link">
    s
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#send_event" class="md-nav__link">
    send_event
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shadow_name" class="md-nav__link">
    shadow_name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#si" class="md-nav__link">
    si
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signature" class="md-nav__link">
    signature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signature_from_request" class="md-nav__link">
    signature_from_request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starmap" class="md-nav__link">
    starmap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start_strategy" class="md-nav__link">
    start_strategy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtask" class="md-nav__link">
    subtask
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtask_from_request" class="md-nav__link">
    subtask_from_request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update_state" class="md-nav__link">
    update_state
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/hotosm/export-tool-api/edit/master/docs/api/API/api_worker.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="module-apiapi_worker">Module API.api_worker</h1>
<h2 id="variables">Variables</h2>
<div class="highlight"><pre><span></span><code><span class="n">ALLOW_BIND_ZIP_FILTER</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">DEFAULT_HARD_TASK_LIMIT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">DEFAULT_README_TEXT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">DEFAULT_SOFT_TASK_LIMIT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ENABLE_SOZIP</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ENABLE_TILES</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">EXPORT_PATH</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">HDX_HARD_TASK_LIMIT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">HDX_SOFT_TASK_LIMIT</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">WORKER_PREFETCH_MULTIPLIER</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">celery</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">celery_backend</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">celery_broker_uri</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">use_s3_to_upload</span>
</code></pre></div>
<h2 id="functions">Functions</h2>
<h4 id="create_readme_content">create_readme_content</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_readme_content</span><span class="p">(</span>
    <span class="n">default_readme</span><span class="p">,</span>
    <span class="n">polygon_stats</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="remove_file">remove_file</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_file</span><span class="p">(</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>
Used for removing temp file dir and its all content after zip file is delivered to user</p>
<h4 id="zip_binding">zip_binding</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zip_binding</span><span class="p">(</span>
    <span class="n">working_dir</span><span class="p">,</span>
    <span class="n">exportname_parts</span><span class="p">,</span>
    <span class="n">geom_dump</span><span class="p">,</span>
    <span class="n">polygon_stats</span><span class="p">,</span>
    <span class="n">default_readme</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="classes">Classes</h2>
<h3 id="baseclasstask">BaseclassTask</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">BaseclassTask</span><span class="p">(</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
<p>Base class for celery tasks</p>
<p>Args:
    celery (<em>type</em>): <em>description</em></p>
<h4 id="ancestors-in-mro">Ancestors (in MRO)</h4>
<ul>
<li>celery.app.task.Task</li>
<li>celery.app.task.Task</li>
</ul>
<h4 id="descendants">Descendants</h4>
<ul>
<li>API.api_worker.process_custom_request</li>
</ul>
<h4 id="class-variables">Class variables</h4>
<div class="highlight"><pre><span></span><code><span class="n">MaxRetriesExceededError</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">OperationalError</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">Request</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">Strategy</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">abstract</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">acks_late</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">acks_on_failure_or_timeout</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">app</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">default_retry_delay</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">expires</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">from_config</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">ignore_result</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">max_retries</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">name</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">priority</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">rate_limit</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">reject_on_worker_lost</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">request_stack</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">resultrepr_maxsize</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">send_events</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">serializer</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">soft_time_limit</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">store_errors_even_if_ignored</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">throws</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">time_limit</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">track_started</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">trail</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">typing</span>
</code></pre></div>
<h4 id="static-methods">Static methods</h4>
<h4 id="add_around">add_around</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_around</span><span class="p">(</span>
    <span class="n">attr</span><span class="p">,</span>
    <span class="n">around</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="annotate">annotate</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">annotate</span><span class="p">(</span>

<span class="p">)</span>
</code></pre></div>
<h4 id="bind">bind</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bind</span><span class="p">(</span>
    <span class="n">app</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="on_bound">on_bound</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_bound</span><span class="p">(</span>
    <span class="n">app</span>
<span class="p">)</span>
</code></pre></div>
Called when the task is bound to an app.</p>
<p>Note:
    This class method can be defined to do additional actions when
    the task class is bound to an app.</p>
<h4 id="instance-variables">Instance variables</h4>
<div class="highlight"><pre><span></span><code><span class="n">backend</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><span class="n">request</span>
</code></pre></div>
Get current request object.</p>
<h4 id="methods">Methods</h4>
<h4 id="asyncresult">AsyncResult</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">AsyncResult</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Get AsyncResult instance for the specified task.</p>
<p>Arguments:
    task_id (str): Task id to get result for.</p>
<h4 id="add_to_chord">add_to_chord</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_to_chord</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sig</span><span class="p">,</span>
    <span class="n">lazy</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>
Add signature to the chord the current task is a member of.</p>
<p>.. versionadded:: 4.0</p>
<p>Currently only supported by the Redis result backend.</p>
<p>Arguments:
    sig (Signature): Signature to extend chord with.
    lazy (bool): If enabled the new task won't actually be called,
        and <code>sig.delay()</code> must be called manually.</p>
<h4 id="add_trail">add_trail</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_trail</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">result</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="after_return">after_return</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">after_return</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">status</span><span class="p">,</span>
    <span class="n">retval</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="p">,</span>
    <span class="n">einfo</span>
<span class="p">)</span>
</code></pre></div>
Handler called after the task returns.</p>
<p>Arguments:
    status (str): Current task state.
    retval (Any): Task return value/exception.
    task_id (str): Unique id of the task.
    args (Tuple): Original arguments for the task.
    kwargs (Dict): Original keyword arguments for the task.
    einfo (~billiard.einfo.ExceptionInfo): Exception information.</p>
<p>Returns:
    None: The return value of this handler is ignored.</p>
<h4 id="apply">apply</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">link_error</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">retries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">throw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">logfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">loglevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">options</span>
<span class="p">)</span>
</code></pre></div>
Execute this task locally, by blocking until the task returns.</p>
<p>Arguments:
    args (Tuple): positional arguments passed on to the task.
    kwargs (Dict): keyword arguments passed on to the task.
    throw (bool): Re-raise task exceptions.
        Defaults to the :setting:<code>task_eager_propagates</code> setting.</p>
<p>Returns:
    celery.result.EagerResult: pre-evaluated result.</p>
<h4 id="apply_async">apply_async</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">apply_async</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">producer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">link</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">link_error</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">shadow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">options</span>
<span class="p">)</span>
</code></pre></div>
Apply tasks asynchronously by sending a message.</p>
<p>Arguments:
    args (Tuple): The positional arguments to pass on to the task.</p>
<pre><code>kwargs (Dict): The keyword arguments to pass on to the task.

countdown (float): Number of seconds into the future that the
    task should execute.  Defaults to immediate execution.

eta (~datetime.datetime): Absolute time and date of when the task
    should be executed.  May not be specified if `countdown`
    is also supplied.

expires (float, ~datetime.datetime): Datetime or
    seconds in the future for the task should expire.
    The task won't be executed after the expiration time.

shadow (str): Override task name used in logs/monitoring.
    Default is retrieved from :meth:`shadow_name`.

connection (kombu.Connection): Re-use existing broker connection
    instead of acquiring one from the connection pool.

retry (bool): If enabled sending of the task message will be
    retried in the event of connection loss or failure.
    Default is taken from the :setting:`task_publish_retry`
    setting.  Note that you need to handle the
    producer/connection manually for this to work.

retry_policy (Mapping): Override the retry policy used.
    See the :setting:`task_publish_retry_policy` setting.

time_limit (int): If set, overrides the default time limit.

soft_time_limit (int): If set, overrides the default soft
    time limit.

queue (str, kombu.Queue): The queue to route the task to.
    This must be a key present in :setting:`task_queues`, or
    :setting:`task_create_missing_queues` must be
    enabled.  See :ref:`guide-routing` for more
    information.

exchange (str, kombu.Exchange): Named custom exchange to send the
    task to.  Usually not used in combination with the ``queue``
    argument.

routing_key (str): Custom routing key used to route the task to a
    worker server.  If in combination with a ``queue`` argument
    only used to specify custom routing keys to topic exchanges.

priority (int): The task priority, a number between 0 and 9.
    Defaults to the :attr:`priority` attribute.

serializer (str): Serialization method to use.
    Can be `pickle`, `json`, `yaml`, `msgpack` or any custom
    serialization method that's been registered
    with :mod:`kombu.serialization.registry`.
    Defaults to the :attr:`serializer` attribute.

compression (str): Optional compression method
    to use.  Can be one of ``zlib``, ``bzip2``,
    or any custom compression methods registered with
    :func:`kombu.compression.register`.
    Defaults to the :setting:`task_compression` setting.

link (Signature): A single, or a list of tasks signatures
    to apply if the task returns successfully.

link_error (Signature): A single, or a list of task signatures
    to apply if an error occurs while executing the task.

producer (kombu.Producer): custom producer to use when publishing
    the task.

add_to_parent (bool): If set to True (default) and the task
    is applied while executing another task, then the result
    will be appended to the parent tasks ``request.children``
    attribute.  Trailing can also be disabled by default using the
    :attr:`trail` attribute

ignore_result (bool): If set to `False` (default) the result
    of a task will be stored in the backend. If set to `True`
    the result will not be stored. This can also be set
    using the :attr:`ignore_result` in the `app.task` decorator.

publisher (kombu.Producer): Deprecated alias to ``producer``.

headers (Dict): Message headers to be included in the message.
</code></pre>
<p>Returns:
    celery.result.AsyncResult: Promise of future evaluation.</p>
<p>Raises:
    TypeError: If not enough arguments are passed, or too many
        arguments are passed.  Note that signature checks may
        be disabled by specifying <code>@task(typing=False)</code>.
    kombu.exceptions.OperationalError: If a connection to the
       transport cannot be made, or if the connection is lost.</p>
<p>Note:
    Also supports all keyword arguments supported by
    :meth:<code>kombu.Producer.publish</code>.</p>
<h4 id="before_start">before_start</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">before_start</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Handler called before the task starts.</p>
<p>.. versionadded:: 5.2</p>
<p>Arguments:
    task_id (str): Unique id of the task to execute.
    args (Tuple): Original arguments for the task to execute.
    kwargs (Dict): Original keyword arguments for the task to execute.</p>
<p>Returns:
    None: The return value of this handler is ignored.</p>
<h4 id="chunks">chunks</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">it</span><span class="p">,</span>
    <span class="n">n</span>
<span class="p">)</span>
</code></pre></div>
Create a :class:<code>~celery.canvas.chunks</code> task for this task.</p>
<h4 id="delay">delay</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">delay</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Star argument version of :meth:<code>apply_async</code>.</p>
<p>Does not support the extra options enabled by :meth:<code>apply_async</code>.</p>
<p>Arguments:
    <em>args (Any): Positional arguments passed on to the task.
    </em>*kwargs (Any): Keyword arguments passed on to the task.
Returns:
    celery.result.AsyncResult: Future promise.</p>
<h4 id="map">map</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">it</span>
<span class="p">)</span>
</code></pre></div>
Create a :class:<code>~celery.canvas.xmap</code> task from <code>it</code>.</p>
<h4 id="on_failure">on_failure</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_failure</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exc</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="p">,</span>
    <span class="n">einfo</span>
<span class="p">)</span>
</code></pre></div>
Logic when task fails</p>
<p>Args:
    exc (<em>type</em>): <em>description</em>
    task_id (<em>type</em>): <em>description</em>
    args (<em>type</em>): <em>description</em>
    kwargs (<em>type</em>): <em>description</em>
    einfo (<em>type</em>): <em>description</em></p>
<h4 id="on_replace">on_replace</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_replace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sig</span>
<span class="p">)</span>
</code></pre></div>
Handler called when the task is replaced.</p>
<p>Must return super().on_replace(sig) when overriding to ensure the task replacement
is properly handled.</p>
<p>.. versionadded:: 5.3</p>
<p>Arguments:
    sig (Signature): signature to replace with.</p>
<h4 id="on_retry">on_retry</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_retry</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exc</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="p">,</span>
    <span class="n">einfo</span>
<span class="p">)</span>
</code></pre></div>
Retry handler.</p>
<p>This is run by the worker when the task is to be retried.</p>
<p>Arguments:
    exc (Exception): The exception sent to :meth:<code>retry</code>.
    task_id (str): Unique id of the retried task.
    args (Tuple): Original arguments for the retried task.
    kwargs (Dict): Original keyword arguments for the retried task.
    einfo (~billiard.einfo.ExceptionInfo): Exception information.</p>
<p>Returns:
    None: The return value of this handler is ignored.</p>
<h4 id="on_success">on_success</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">on_success</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">retval</span><span class="p">,</span>
    <span class="n">task_id</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Success handler.</p>
<p>Run by the worker if the task executes successfully.</p>
<p>Arguments:
    retval (Any): The return value of the task.
    task_id (str): Unique id of the executed task.
    args (Tuple): Original arguments for the executed task.
    kwargs (Dict): Original keyword arguments for the executed task.</p>
<p>Returns:
    None: The return value of this handler is ignored.</p>
<h4 id="pop_request">pop_request</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">pop_request</span><span class="p">(</span>
    <span class="bp">self</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="push_request">push_request</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">push_request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="replace">replace</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">replace</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sig</span>
<span class="p">)</span>
</code></pre></div>
Replace this task, with a new task inheriting the task id.</p>
<p>Execution of the host task ends immediately and no subsequent statements
will be run.</p>
<p>.. versionadded:: 4.0</p>
<p>Arguments:
    sig (Signature): signature to replace with.
    visitor (StampingVisitor): Visitor API object.</p>
<p>Raises:
    ~@Ignore: This is always raised when called in asynchronous context.
    It is best to always use <code>return self.replace(...)</code> to convey
    to the reader that the task won't continue after being replaced.</p>
<h4 id="retry">retry</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">retry</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">exc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">throw</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">eta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">countdown</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_retries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">options</span>
<span class="p">)</span>
</code></pre></div>
Retry the task, adding it to the back of the queue.</p>
<p>Example:
    &gt;&gt;&gt; from imaginary_twitter_lib import Twitter
    &gt;&gt;&gt; from proj.celery import app</p>
<pre><code>&gt;&gt;&gt; @app.task(bind=True)
... def tweet(self, auth, message):
...     twitter = Twitter(oauth=auth)
...     try:
...         twitter.post_status_update(message)
...     except twitter.FailWhale as exc:
...         # Retry in 5 minutes.
...         raise self.retry(countdown=60 * 5, exc=exc)
</code></pre>
<p>Note:
    Although the task will never return above as <code>retry</code> raises an
    exception to notify the worker, we use <code>raise</code> in front of the
    retry to convey that the rest of the block won't be executed.</p>
<p>Arguments:
    args (Tuple): Positional arguments to retry with.
    kwargs (Dict): Keyword arguments to retry with.
    exc (Exception): Custom exception to report when the max retry
        limit has been exceeded (default:
        :exc:<code>~@MaxRetriesExceededError</code>).</p>
<pre><code>    If this argument is set and retry is called while
    an exception was raised (``sys.exc_info()`` is set)
    it will attempt to re-raise the current exception.

    If no exception was raised it will raise the ``exc``
    argument provided.
countdown (float): Time in seconds to delay the retry for.
eta (~datetime.datetime): Explicit time and date to run the
    retry at.
max_retries (int): If set, overrides the default retry limit for
    this execution.  Changes to this parameter don't propagate to
    subsequent task retry attempts.  A value of :const:`None`,
    means "use the default", so if you want infinite retries you'd
    have to set the :attr:`max_retries` attribute of the task to
    :const:`None` first.
time_limit (int): If set, overrides the default time limit.
soft_time_limit (int): If set, overrides the default soft
    time limit.
throw (bool): If this is :const:`False`, don't raise the
    :exc:`~@Retry` exception, that tells the worker to mark
    the task as being retried.  Note that this means the task
    will be marked as failed if the task raises an exception,
    or successful if it returns after the retry call.
**options (Any): Extra options to pass on to :meth:`apply_async`.
</code></pre>
<p>Raises:</p>
<pre><code>celery.exceptions.Retry:
    To tell the worker that the task has been re-sent for retry.
    This always happens, unless the `throw` keyword argument
    has been explicitly set to :const:`False`, and is considered
    normal operation.
</code></pre>
<h4 id="run">run</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
The body of the task executed by workers.</p>
<h4 id="s">s</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">s</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Create signature.</p>
<p>Shortcut for <code>.s(*a, **k) -&gt; .signature(a, k)</code>.</p>
<h4 id="send_event">send_event</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">send_event</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">type_</span><span class="p">,</span>
    <span class="n">retry</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">retry_policy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">fields</span>
<span class="p">)</span>
</code></pre></div>
Send monitoring event message.</p>
<p>This can be used to add custom event types in :pypi:<code>Flower</code>
and other monitors.</p>
<p>Arguments:
    type_ (str):  Type of event, e.g. <code>"task-failed"</code>.</p>
<p>Keyword Arguments:
    retry (bool):  Retry sending the message
        if the connection is lost.  Default is taken from the
        :setting:<code>task_publish_retry</code> setting.
    retry_policy (Mapping): Retry settings.  Default is taken
        from the :setting:<code>task_publish_retry_policy</code> setting.
    **fields (Any): Map containing information about the event.
        Must be JSON serializable.</p>
<h4 id="shadow_name">shadow_name</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">shadow_name</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="p">,</span>
    <span class="n">options</span>
<span class="p">)</span>
</code></pre></div>
Override for custom task name in worker logs/monitoring.</p>
<p>Example:
    .. code-block:: python</p>
<pre><code>    from celery.utils.imports import qualname

    def shadow_name(task, args, kwargs, options):
        return qualname(args[0])

    @app.task(shadow_name=shadow_name, serializer='pickle')
    def apply_function_async(fun, *args, **kwargs):
        return fun(*args, **kwargs)
</code></pre>
<p>Arguments:
    args (Tuple): Task positional arguments.
    kwargs (Dict): Task keyword arguments.
    options (Dict): Task execution options.</p>
<h4 id="si">si</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">si</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Create immutable signature.</p>
<p>Shortcut for <code>.si(*a, **k) -&gt; .signature(a, k, immutable=True)</code>.</p>
<h4 id="signature">signature</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">signature</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">starargs</span><span class="p">,</span>
    <span class="o">**</span><span class="n">starkwargs</span>
<span class="p">)</span>
</code></pre></div>
Create signature.</p>
<p>Returns:
    :class:<code>~celery.signature</code>:  object for
        this task, wrapping arguments and execution options
        for a single task invocation.</p>
<h4 id="signature_from_request">signature_from_request</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">signature_from_request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">queue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">extra_options</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="starmap">starmap</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">starmap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">it</span>
<span class="p">)</span>
</code></pre></div>
Create a :class:<code>~celery.canvas.xstarmap</code> task from <code>it</code>.</p>
<h4 id="start_strategy">start_strategy</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">start_strategy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">app</span><span class="p">,</span>
    <span class="n">consumer</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="subtask">subtask</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">subtask</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="n">starargs</span><span class="p">,</span>
    <span class="o">**</span><span class="n">starkwargs</span>
<span class="p">)</span>
</code></pre></div>
Create signature.</p>
<p>Returns:
    :class:<code>~celery.signature</code>:  object for
        this task, wrapping arguments and execution options
        for a single task invocation.</p>
<h4 id="subtask_from_request">subtask_from_request</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">subtask_from_request</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">queue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">extra_options</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="update_state">update_state</h4>
<p><div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">update_state</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">task_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span>
<span class="p">)</span>
</code></pre></div>
Update task state.</p>
<p>Arguments:
    task_id (str): Id of the task to update.
        Defaults to the id of the current task.
    state (str): New state.
    meta (Dict): State meta-data.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/hotosm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>